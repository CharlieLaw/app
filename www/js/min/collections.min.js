/* **********************************************
     Begin button.js
********************************************** *//* Button */nzp.ButtonCollection=Backbone.Collection.extend({model:nzp.Button});nzp.ContactPageCollection=Backbone.Collection.extend({model:nzp.ContactPage});nzp.HeaderTitleCollection=Backbone.Collection.extend({model:nzp.HeaderTitle});nzp.HeaderCollection=Backbone.Collection.extend({model:nzp.Header});nzp.TrackingPageCollection=Backbone.Collection.extend({model:nzp.TrackingPage,localStorage:new Backbone.LocalStorage("tracking"),comparator:function(e,t){return t.get("timestamp")-e.get("timestamp")},clear:function(){this.destroy()}});nzp.TabCollection=Backbone.Collection.extend({model:nzp.Tab});nzp.PlacesSingle=Backbone.Collection.extend({model:nzp.Place,apiKey:"a7f0c7b0b123012f06d2000c29b44ac0",url:function(){return"http://api.nzpost.co.nz/locator/api/details/?api_key="+this.apiKey+"&id="+this.models[0].attributes.model.id+"&format=jsonp&callback=?"}});nzp.Places=Backbone.Collection.extend({model:nzp.Place,apiKey:"a7f0c7b0b123012f06d2000c29b44ac0",noResults:15,url:function(){return"http://api.nzpost.co.nz/locator/api/locations?api_key="+this.apiKey+"&type=Postbox+Lobby&type=Dropbox&type=Postbox&type=PostShop&nearby_latitude="+this.lat+"&nearby_longitude="+this.lng+"&lat1=&lng1=&lat2=&lng2=&keyword=&max="+this.noResults+"&format=jsonp&callback=?"},comparator:function(e){return e.get("distance_in_m")||0},postShops:function(){return this.filter(function(e){return e.get("type").toLowerCase()=="postshop"})},postboxs:function(){return this.filter(function(e){return e.get("type").toLowerCase()=="postbox"})},postboxLobbies:function(){return this.filter(function(e){return e.get("type").toLowerCase()=="postbox lobby"})},closestPlaces:function(){places=[_(this.postboxLobbies()).first(),this.postboxs()[0],this.postShops()[0]];return _(places).compact()}});nzp.NavCollection=Backbone.Collection.extend({model:nzp.Nav});nzp.HomePageCollection=Backbone.Collection.extend({model:nzp.HomePage});nzp.HomePageCollection2=Backbone.Collection.extend({model:nzp.HomePage2,localStorage:new Backbone.LocalStorage("navigation")});nzp.LocatorPageCollection=Backbone.Collection.extend({model:nzp.LocatorPage});