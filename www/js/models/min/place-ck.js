nzp.Place=Backbone.Model.extend({defaults:{apiKey:"a7f0c7b0b123012f06d2000c29b44ac0"},url:function(){return"http://api.nzpost.co.nz/locator/api/details?api_key=b2b736004873012e88a6442c03203548&id="+this.id+"&format=jsonp&callback=?&commit=Search"},getLatLng:function(){return new google.maps.LatLng(this.get("lat"),this.get("lng"))},createMarker:function(){switch(this.get("type")){case"PostShop":var e=new google.maps.MarkerImage("./img/sprite.locator.png",new google.maps.Size(24,36),new google.maps.Point(0,25),new google.maps.Point(10,34));break;case"Postbox":var e=new google.maps.MarkerImage("./img/sprite.locator.png",new google.maps.Size(24,36),new google.maps.Point(80,25),new google.maps.Point(10,34));break;case"Postbox Lobby":var e=new google.maps.MarkerImage("./img/sprite.locator.png",new google.maps.Size(24,36),new google.maps.Point(40,25),new google.maps.Point(10,34));break;default:var e=new google.maps.MarkerImage("./img/sprite.locator.png",new google.maps.Size(24,36),new google.maps.Point(0,25),new google.maps.Point(10,34))}var t=new google.maps.MarkerImage("./img/shadow.png",new google.maps.Size(40,37),new google.maps.Point(0,0),new google.maps.Point(12,35)),n=new google.maps.Marker({position:this.getLatLng(),title:this.get("name"),icon:e,location_type:this.get("type")});return n},infowindowContent:function(){var e=new Date,t=e.getDay();if(this.get("hours").length>0){var n=this.get("hours")[t-1];if(n.close!=undefined){var r=n.close,i=n.open,s=toDate(r,"h:m"),o=e.getHours(),u=e.getMinutes(),a=o+":"+u,f=toDate(a,"h:m");if(f>s)var l="Closed at "+r+" today";else var l="Open form "+i+" - "+r+" today"}else if(n.closed!=undefined)var l="Closed all day";else var l="Opening hours unknown"}else var l="";var c=this.get("id"),h=document.URL,p=h.indexOf("locator/"),d=h.substring(0,p+8),v=d+"closest/"+c,m=this.get("distance_in_m"),g=parseFloat(m/1e3).toFixed(2),y="",b=this.get("type"),w=this.get("address");y+='<div class="bubble">';b.length>0&&(y+="<h2>"+b+"</h2>");w.length>0&&(y+="<ul><li>"+w+"</li>");g.length>0&&(y+="<li>Distance: "+g+"km</li>");l.length>0&&(y+="<li>"+l+"</li>");y+='<li><a href="'+v+'">More info...</a></li></ul></div>';var E=y;return E}});