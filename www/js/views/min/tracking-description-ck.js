/* ---------------------------------------------------------------------------------------------------------
 
 	Tracking details page

 	* Made of 3 veiws, the form, name (which can be edited) and the item detils
	
 	* nzp.TrackingDetailsForm = Form input, w

---------------------------------------------------------------------------------------------------------*/// Form area
nzp.TrackingDetailsForm=Backbone.View.extend({el:'<form action="" id="tracking-add-name" class="tracking-form">',template:_.template($("#tmp-tracking-description-form").html()),initialize:function(){_.bindAll(this,"render")},events:{submit:"submitForm"},render:function(){this.$el.html(this.template({}));nzp.$packageName=this.$("#tracking-updated-name");return this},submitForm:function(e){var t=nzp.$packageName.val();if(t==""){this.model.save({user_added_name:""});return!1}this.model.save({user_added_name:t});nzp.$packageName.blur();nzp.$body.removeClass("showform")}});nzp.TrackingDetailsUserName=Backbone.View.extend({el:'<h2 id="user-added-name">',template:_.template($("#tmp-tracking-description-name").html()),initialize:function(){_.bindAll(this,"render");this.model.bind("change",this.update,this)},render:function(){this.$el.html(this.template(this.model.toJSON()));this.model.toJSON().user_added_name.length===0&&this.$el.addClass("hide");return this},update:function(){var e=this;this.$el.html(this.template(this.model.toJSON()));if(this.model.toJSON().user_added_name.length>0){this.$el.addClass("highlight high-out");this.$el.removeClass("hide")}else this.$el.addClass("hide");setTimeout(function(){e.$el.removeClass("highlight high-out")},1e3);return this}});nzp.TrackingDetails=Backbone.View.extend({el:'<div id="tracking-details-page">',template:_.template($("#tmp-tracking-description-item").html()),events:{"click #tracking-delete":"deleteModel","click #tracking-edit":"showForm"},initialize:function(){_.bindAll(this,"render","deleteModel","showForm")},render:function(){this.$el.html(this.template(this.model.toJSON()));return this},deleteModel:function(e){e.preventDefault();var t=confirm("Are you sure you want to delete "+this.model.track_code+"?");if(t){this.model.clear();nzp.router.navigate("tracking",{trigger:!0})}},showForm:function(e){e.preventDefault();console.log(nzp.$packageName);nzp.$body.toggleClass("showform");nzp.$packageName.focus()}});